<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pkgpurl facilitates R package authoring using a literate programming approach. The main idea behind this is to write all of the R source code in R Markdown files (`Rmd/*.Rmd`), which allows the actual code to be freely mixed with explanatory and supplementary information in expressive Markdown format. The main object of pkgpurl is to provide a standardized way to compile the bare `.R` files from the prose-enhanced and thus more human-oriented `.Rmd` files.">
<title>Facilitate Authoring R Packages in the R Markdown File Format ‚Ä¢ pkgpurl</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link rel="stylesheet" href="deps/all.min.css">
<link rel="stylesheet" href="deps/v4-shims.min.css">
<script src="deps/bootstrap-toc.min.js"></script><script src="deps/headroom.min.js"></script><script src="deps/jQuery.headroom.min.js"></script><script src="deps/clipboard.min.js"></script><script src="deps/fuse.min.js"></script><script src="deps/autocomplete.jquery.min.js"></script><script src="deps/mark.min.js"></script><script src="deps/MathJax.js"></script><script src="deps/TeX-AMS-MML_HTMLorMML.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Facilitate Authoring R Packages in the R Markdown File Format">
<meta property="og:description" content="pkgpurl facilitates R package authoring using a literate programming approach. The main idea behind this is to write all of the R source code in R Markdown files (`Rmd/*.Rmd`), which allows the actual code to be freely mixed with explanatory and supplementary information in expressive Markdown format. The main object of pkgpurl is to provide a standardized way to compile the bare `.R` files from the prose-enhanced and thus more human-oriented `.Rmd` files.">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@2BSalim">
<meta name="twitter:site" content="@2BSalim">
<meta name="robots" content="noindex">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script src="https://rpkg.dev/counter-dev.min.js" data-id="4c4963fe-9fcf-4d81-95bb-2135e114b85b" data-utcoffset="1"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">pkgpurl</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.0.9015</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://gitlab.com/salim_b/r/pkgs/pkgpurl/" aria-label="gitlab">
    <span class="fab fa fab fa-gitlab fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="pkgpurl">pkgpurl<a class="anchor" aria-label="anchor" href="#pkgpurl"></a>
</h1></div>
<p></p>
<p>pkgpurl facilitates R package authoring using a literate programming approach. The main idea behind this is to write all of the R source code in R Markdown files (<code>Rmd/*.Rmd</code>), which allows the actual code to be freely mixed with explanatory and supplementary information in expressive Markdown format. The main object of pkgpurl is to provide a standardized way to compile the bare <code>.R</code> files from the prose-enhanced and thus more human-oriented <code>.Rmd</code> files.</p>
<p>The basic idea behind the concept this package implements originates from Yihui Xie. See his blog post <a href="https://yihui.org/rlp/" class="external-link"><em>Write An R Package Using Literate Programming Techniques</em></a> for more details, it‚Äôs definitively worth reading. This package‚Äôs function <a href="https://pkgpurl.rpkg.dev/dev/reference/purl_rmd.html"><code>pkgpurl::purl_rmd()</code></a> is just a less cumbersome alternative to the Makefile approach outlined by him.</p>
<div class="section level2">
<h2 id="pros-and-cons">Pros and cons<a class="anchor" aria-label="anchor" href="#pros-and-cons"></a>
</h2>
<p>The <a href="https://rmarkdown.rstudio.com/" class="external-link">R Markdown</a> format provides several <strong>advantages</strong> over the bare R source format when developing an R package:</p>
<ul>
<li>
<p>üëç <strong>Mix Markdown and Code</strong></p>
<p>It allows the actual code to be freely mixed with explanatory and supplementary information in expressive <a href="https://en.wikipedia.org/wiki/Markdown" class="external-link">Markdown</a> format instead of having to rely on <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Comments" class="external-link"><code>#</code> comments</a> only. In general, this should encourage to actually record code-accompanying information because you‚Äôre able to use the full spectrum of <a href="https://pandoc.org/MANUAL.html#pandocs-markdown" class="external-link">Pandoc‚Äôs Markdown syntax</a> like inline formatting, lists, tables, quotations or math<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Actually, you could write anything you like in any syntax outside of R code chunks as long as you don‚Äôt mind the file to be &lt;em&gt;knittable&lt;/em&gt; (which it doesn‚Äôt have to be).&lt;/p&gt;"><sup>1</sup></a>.</p>
<p>It is especially powerful in combination with the <a href="https://rstudio.github.io/visual-markdown-editing/" class="external-link">Visual R Markdown</a> feature introduced in RStudio 1.4, which ‚Äì in addition to the visual editor ‚Äì offers a feature whose utility can hardly be overestimated: Pandoc Markdown <a href="https://en.wikipedia.org/wiki/Canonicalization" class="external-link">canonicalization</a> (on file save<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;It basically sends the (R) Markdown file on a ‚ÄúPandoc round trip‚Äù on every file save.&lt;/p&gt;"><sup>2</sup></a>). For example, it allows paragraphs being wrapped automatically at the desired line width; or to write a minimal sloppy <a href="https://pandoc.org/MANUAL.html#extension-pipe_tables" class="external-link">pipe table</a> that is automatically normalized to a beautifully formatted and actually readable one.</p>
<p>The relevant editor options which adjust the canonical Markdown generation can either be set</p>
<ul>
<li>
<p><a href="https://rstudio.github.io/visual-markdown-editing/#/markdown?id=writer-options" class="external-link">per <code>.Rmd</code> file</a>, e.g.</p>
<pre class="rmd"><code>---
editor_options:
  markdown:
    wrap: 160
    references:
      location: section
    canonical: true
---</code></pre>
</li>
<li>
<p>or <a href="https://rstudio.github.io/visual-markdown-editing/#/options?id=project-options" class="external-link">per project</a> in the usual <code>PACKAGE_NAME.Rproj</code> file, e.g.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="dt">MarkdownWrap: Column</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="dt">MarkdownWrapAtColumn: 160</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="dt">MarkdownReferences: Section</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="dt">MarkdownCanonical: Yes</span></span></code></pre></div>
<p>(I‚Äôd recommend to set them <em>per project</em>, so they apply to the whole package including any <code>.Rmd</code> vignettes.)</p>
</li>
</ul>
</li>
<li>
<p>üëç <strong>All your code in a single, well-structured file</strong></p>
<p>The <a href="https://style.tidyverse.org/package-files.html" class="external-link">traditional recommendation</a> to not lose overview of your package‚Äôs R source code is to split it over multiple files. The popular (and very useful) book <em>R Packages</em> <a href="https://r-pkgs.org/code.html#sec-code-organising" class="external-link">gives the following advice</a>:</p>
<blockquote>
<p>If it‚Äôs very hard to predict which file a function lives in, that suggests it‚Äôs time to separate your functions into more files or reconsider how you are naming your functions and/or files.</p>
</blockquote>
<p>I think this is just ridiculous.</p>
<p>Instead, I encourage you to keep all your code (as far as possible) in a single file <code>Rmd/PACKAGE_NAME.Rmd</code> and structure it according to the <a href="https://pkgpurl.rpkg.dev/dev/reference/gen_pkgdown_ref.html#details">rules described here</a>, which even allows the <a href="https://pkgdown.r-lib.org/reference/build_reference.html#reference-index" class="external-link">pkgdown <code>Reference:</code> index</a> to be automatically in sync with the source code structure. As a result, you re-organize (and thus most likely improve) your package‚Äôs code structure whenever you intend to improve the pkgdown reference ‚Äì and vice versa.</p>
<p>Keeping all code in a single file frees you from the traditional hassle of finding a viable (but in the end still unsatisfactory) way to organize your R source code across multiple files. Of course, there are still good reasons to outsource code into separate files <em>in certain situations</em>, which nothing is stopping you from doing. You can also <a href="https://pkgpurl.rpkg.dev/dev/reference/purl_rmd.html#-rmd-files-excluded-from-purling">exclude whole <code>.Rmd</code> files from purling using the <code>.nopurl.Rmd</code> filename suffix</a>.</p>
</li>
<li>
<p>üëç <strong>Improved overview and navigation</strong></p>
<p>You can rely on RStudio‚Äôs <a href="https://rviews.rstudio.com/2016/11/11/easy-tricks-you-mightve-missed/#code-outline" class="external-link">code outline</a> to easily navigate through longer <code>.Rmd</code> files. IMHO it provides significantly better usability than the <a href="https://support.posit.co/hc/en-us/articles/200484568-Code-Folding-and-Sections" class="external-link">code section standard</a> of <code>.R</code> files. It makes it easy to find your way around source files that are thousands of lines long.</p>
<p>RStudio‚Äôs <a href="https://support.posit.co/hc/en-us/articles/200711853-Keyboard-Shortcuts" class="external-link"><em>Go to File/Function</em> shortcut</a> works the same for <code>.Rmd</code> files as it does for <code>.R</code> files.</p>
</li>
<li>
<p>üëç <strong>Improved visual clarity</strong></p>
<p>If you use RStudio or any other editor with proper R Markdown syntax highlighting, you will probably like the gained visual clarity for distinguishing individual functions/code parts (by putting them in separate R code chunks). This also facilitates creating a meaningful document structure (in Markdown) alongside the actual R source code.</p>
</li>
<li>
<p>üëç <strong>Easily toggle code inclusion</strong></p>
<p>You can put development-only code which never lands in the generated R source files (and thus the R package) in separate code chunks with the chunk option <a href="https://yihui.org/knitr/options/#extracting-source-code" class="external-link"><code>purl = FALSE</code></a>. This turns out to be very convenient in certain situations.</p>
<p>For example, this is a good way to reproducibly document the generation of cleaned versions of <a href="https://r-pkgs.org/data.html#sec-data-data" class="external-link">exported data</a> as well as <a href="https://r-pkgs.org/data.html#sec-data-sysdata" class="external-link">internal data</a>. This avoids having to outsource the code to separate files under <code>data-raw/</code> and adding the directory to <code>.Rbuildignore</code>, i.e.¬†no need to use <code><a href="https://usethis.r-lib.org/reference/use_data.html" class="external-link">usethis::use_data_raw()</a></code>. Instead, you just set <code>purl = FALSE</code> for the relevant code chunk(s). You can (and should) still use <a href="https://usethis.r-lib.org/reference/use_data.html" class="external-link"><code>usethis::use_data()</code></a> (optionally with <code>overwrite = TRUE</code>) to generate the files under <code>data/</code> holding external package data as well as the <code>R/sysdata.rda</code> file (using <code>internal = TRUE</code>) holding internal package data.</p>
</li>
<li>
<p>üëç <strong>Easily toggle styler</strong></p>
<p>If you use <a href="https://styler.r-lib.org/" class="external-link">styler</a> to auto-format your code globally by <a href="https://styler.r-lib.org/articles/third-party-integrations.html" class="external-link">setting <code>knitr::opts_chunk$set(tidy = "styler")</code></a>, you can still opt-out on a per-chunk basis by setting <a href="https://github.com/r-lib/styler/releases/tag/v1.5.1" class="external-link"><code>tidy = FALSE</code></a>. This gives pleasant flexibility.</p>
</li>
</ul>
<p>Unfortunately, there are also a few notable <strong>drawbacks</strong> of the R Markdown format:</p>
<ul>
<li>
<p>üëé <strong>Additional workflow step</strong></p>
<p>The pkgpurl approach on writing R packages in the R Markdown format introduces <em>one</em> additional step at the very beginning of typical package development workflows: Running <a href="https://pkgpurl.rpkg.dev/dev/reference/purl_rmd.html"><code>pkgpurl::purl_rmd()</code></a> to generate the <code>R/*.gen.R</code> files from the original <code>Rmd/*.Rmd</code> sources before documenting/checking/testing/building the package. Given sufficient user demand, this could probably be integrated into <a href="https://devtools.r-lib.org/" class="external-link">devtools</a>‚Äô functions in the future, so that no additional action has to be taken by the user when relying on RStudio‚Äôs built-in package building infrastructure.</p>
<p>For the time being, it‚Äôs recommended to set up a custom shortcut<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;I personally recommend to use the shortcut &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;V&lt;/kbd&gt; since it‚Äôs not occupied yet by any of the predefined &lt;a href="https://support.posit.co/hc/en-us/articles/200711853-Keyboard-Shortcuts" class="external-link"&gt;RStudio shortcuts&lt;/a&gt;.&lt;/p&gt;'><sup>3</sup></a> for one or both of <a href="https://pkgpurl.rpkg.dev/dev/reference/purl_rmd.html"><code>pkgpurl::purl_rmd()</code></a> and <a href="https://pkgpurl.rpkg.dev/dev/reference/process_pkg.html"><code>pkgpurl::process_pkg()</code></a> which are registered as <a href="https://rstudio.github.io/rstudioaddins/" class="external-link">RStudio add-ins</a>.</p>
</li>
<li>
<p>üëé <strong>Differing setup</strong></p>
<p>Setting up a new project to write an R package in the R Markdown differs slightly from the classic approach. A suitable convenience function like <code>create_rmd_package()</code> to set up all the necessary parts could probably be added to <a href="https://usethis.r-lib.org/" class="external-link">usethis</a> in the future.</p>
<p>For the time being, you can use my ready-to-go <a href="https://gitlab.com/salim_b/r/pkg-dev-tpl" class="external-link">R Markdown Package Development Template</a> as a starting point for creating new R packages in the R Markdown format.</p>
</li>
<li>
<p>üëé <strong>Unwieldy debugging</strong></p>
<p>Debugging can be a bit more laborious since line numbers in warning and error messages always refer to the generated <code>R/*.gen.R</code> file(s), not the underlying <code>Rmd/*.Rmd</code> source code file(s). If need be, you first have to look up the line numbers in the <code>R/*.gen.R</code> file(s) to understand which function / code parts cause the issue in order to know where to fix it in the <code>Rmd/*.Rmd</code> source(s).</p>
</li>
<li>
<p>üëé <strong>Missing roxygen2 auto-completion</strong></p>
<p>Other than in <code>.R</code> files, RStudio currently doesn‚Äôt support auto-completion of <a href="https://roxygen2.r-lib.org/articles/rd.html" class="external-link">roxygen2 tags</a> in <code>.Rmd</code> files and its <kbd>Reflow Comment</kbd> command doesn‚Äôt properly work on them. These are <a href="https://github.com/rstudio/rstudio/issues/5809#issuecomment-932228146" class="external-link">known issues</a> which will hopefully be resolved in the near future.</p>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install the latest development version of pkgpurl, run the following in R:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="st">"remotes"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span>pkgs <span class="op">=</span> <span class="st">"remotes"</span>,</span>
<span>                   repos <span class="op">=</span> <span class="st">"https://cloud.r-project.org/"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_gitlab.html" class="external-link">install_gitlab</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="st">"salim_b/r/pkgs/pkgpurl"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The (function) reference is found <a href="reference">here</a>.</p>
</div>
<div class="section level2">
<h2 id="package-configuration">Package configuration<a class="anchor" aria-label="anchor" href="#package-configuration"></a>
</h2>
<p>Some of pkgpurl‚Äôs functionality is controlled via package-specific global configuration which can either be set via <a href="https://rdrr.io/r/base/options.html" class="external-link">R options</a> or <a href="https://en.wikipedia.org/wiki/Environment_variable" class="external-link">environment variables</a> (the former take precedence). This configuration includes:</p>
<div class="table-wide">
<table class="table">
<thead><tr class="header">
<th align="left"><strong>Description</strong></th>
<th align="left"><strong>R option</strong></th>
<th align="left"><strong>Environment variable</strong></th>
<th align="left"><strong>Default value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Whether or not to add a <strong>copyright notice</strong> at the beginning of the generated <code>.R</code> files as recommended by e.g.¬†the <a href="https://www.gnu.org/licenses/gpl-howto.html" class="external-link">GNU licenses</a>. The notice consists of the name and description of the program and the word <code>Copyright (C)</code> followed by the release years and the name(s) of the copyright holder(s), or if not specified, the author(s). The year is always the current year. All the other information is extracted from the package‚Äôs <code>DESCRIPTION</code> file.</td>
<td align="left"><code>pkgpurl.add_copyright_notice</code></td>
<td align="left"><code>PKGPURL_ADD_COPYRIGHT_NOTICE</code></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Whether or not to add a <strong>license notice</strong> at the beginning of the generated <code>.R</code> files as recommended by e.g.¬†the <a href="https://www.gnu.org/licenses/gpl-howto.html" class="external-link">GNU licenses</a>. The license is determined from the package‚Äôs <code>DESCRIPTION</code> file and currently only the <a href="https://spdx.org/licenses/AGPL-3.0-or-later.html" class="external-link"><code>AGPL-3.0-or-later</code> license</a> is supported.</td>
<td align="left"><code>pkgpurl.add_license_notice</code></td>
<td align="left"><code>PKGPURL_ADD_LICENSE_NOTICE</code></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Whether or not to overwrite [pkgdown][pkgdown::pkgdown-package]‚Äôs <a href="https://pkgdown.r-lib.org/reference/build_reference.html#reference-index" class="external-link">reference index</a> in the configuration file <code>_pkgdown.yml</code> with an auto-generated one based on the main input file as described in [gen_pkgdown_ref()].</td>
<td align="left"><code>pkgpurl.gen_pkgdown_ref</code></td>
<td align="left"><code>PKGPURL_GEN_PKGDOWN_REF</code></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h2>
<div class="section level3">
<h3 id="r-markdown-format">R Markdown format<a class="anchor" aria-label="anchor" href="#r-markdown-format"></a>
</h3>
<p>This package‚Äôs source code is written in the <a href="https://rmarkdown.rstudio.com/" class="external-link">R Markdown</a> file format to facilitate practices commonly referred to as <a href="https://en.wikipedia.org/wiki/Literate_programming" class="external-link"><em>literate programming</em></a>. It allows the actual code to be freely mixed with explanatory and supplementary information in expressive Markdown format instead of having to rely on <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Comments" class="external-link"><code>#</code> comments</a> only.</p>
<p>All the <code>.gen.R</code> suffixed R source code found under <a href="https://gitlab.com/salim_b/r/pkgs/pkgpurl/-/tree/master/R/" class="external-link"><code>R/</code></a> is generated from the respective R Markdown counterparts under <a href="https://gitlab.com/salim_b/r/pkgs/pkgpurl/-/tree/master/Rmd/" class="external-link"><code>Rmd/</code></a> using <a href="https://pkgpurl.rpkg.dev/dev/reference/purl_rmd.html"><code>pkgpurl::purl_rmd()</code></a><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;This naming convention as well as the very idea to leverage the R Markdown format to author R packages was originally proposed by Yihui Xie. See his excellent &lt;a href="https://yihui.name/rlp/" class="external-link"&gt;blog post&lt;/a&gt; for more detailed information about the benefits of literate programming techniques and some practical examples. Note that using &lt;code&gt;&lt;a href="reference/purl_rmd.html"&gt;pkgpurl::purl_rmd()&lt;/a&gt;&lt;/code&gt; is a less cumbersome alternative to the Makefile approach outlined by him.&lt;/p&gt;'><sup>4</sup></a>. Always make changes only to the <code>.Rmd</code> files ‚Äì never the <code>.R</code> files ‚Äì and then run <code><a href="reference/purl_rmd.html">pkgpurl::purl_rmd()</a></code> to regenerate the R source files.</p>
</div>
<div class="section level3">
<h3 id="coding-style">Coding style<a class="anchor" aria-label="anchor" href="#coding-style"></a>
</h3>
<p>This package borrows a lot of the <a href="https://www.tidyverse.org/" class="external-link">Tidyverse</a> design philosophies. The R code adheres to the principles specified in the <a href="https://principles.tidyverse.org/" class="external-link">Tidyverse Design Guide</a> wherever possible and is formatted according to the <a href="https://style.tidyverse.org/" class="external-link">Tidyverse Style Guide</a> (TSG) with the following exceptions:</p>
<ul>
<li>
<p>Line width is limited to <strong>160 characters</strong>, double the <a href="https://style.tidyverse.org/syntax.html#long-lines" class="external-link">limit proposed by the TSG</a> (80 characters is ridiculously little given today‚Äôs high-resolution wide screen monitors).</p>
<p>Furthermore, the preferred style for breaking long lines differs. Instead of wrapping directly after an expression‚Äôs opening bracket as <a href="https://style.tidyverse.org/syntax.html#long-lines" class="external-link">suggested by the TSG</a>, we prefer two fewer line breaks and indent subsequent lines within the expression by its opening bracket:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># TSG proposes this</span></span>
<span><span class="fu">do_something_very_complicated</span><span class="op">(</span></span>
<span>  something <span class="op">=</span> <span class="st">"that"</span>,</span>
<span>  requires <span class="op">=</span> <span class="va">many</span>,</span>
<span>  arguments <span class="op">=</span> <span class="st">"some of which may be long"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># we prefer this</span></span>
<span><span class="fu">do_something_very_complicated</span><span class="op">(</span>something <span class="op">=</span> <span class="st">"that"</span>,</span>
<span>                              requires <span class="op">=</span> <span class="va">many</span>,</span>
<span>                              arguments <span class="op">=</span> <span class="st">"some of which may be long"</span><span class="op">)</span></span></code></pre></div>
<p>This results in less vertical and more horizontal spread of the code and better readability in pipes.</p>
</li>
<li><p>Usage of <a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">magrittr‚Äôs compound assignment pipe-operator <code>%&lt;&gt;%</code></a> is desirable<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;The TSG &lt;a href="https://style.tidyverse.org/pipes.html#assignment-2" class="external-link"&gt;explicitly instructs to avoid this operator&lt;/a&gt; ‚Äì presumably because it‚Äôs relatively unknown and therefore might be confused with the forward pipe operator &lt;code&gt;%&amp;gt;%&lt;/code&gt; when skimming code only briefly. I don‚Äôt consider this to be an actual issue since there aren‚Äôt many sensible usage patterns of &lt;code&gt;%&amp;gt;%&lt;/code&gt; at the beginning of a pipe sequence inside a function ‚Äì I can only think of creating side effects and relying on &lt;a href="https://rdrr.io/r/base/function.html" class="external-link"&gt;R‚Äôs implicit return of the last evaluated expression&lt;/a&gt;. Therefore ‚Äì and because I really like the &lt;code&gt;%&amp;lt;&amp;gt;%&lt;/code&gt; operator ‚Äì it‚Äôs usage is welcome.&lt;/p&gt;'><sup>5</sup></a>.</p></li>
<li><p>Usage of <a href="https://rdrr.io/r/base/assignOps.html" class="external-link">R‚Äôs right-hand assignment operator <code>-&gt;</code></a> is not allowed<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;The TSG &lt;a href="https://style.tidyverse.org/pipes.html#assignment-2" class="external-link"&gt;explicitly accepts &lt;code&gt;-&amp;gt;&lt;/code&gt; for assignments at the end of a pipe sequence&lt;/a&gt; while Google‚Äôs R Style Guide &lt;a href="https://google.github.io/styleguide/Rguide.html#right-hand-assignment" class="external-link"&gt;considers this bad practice&lt;/a&gt; because it ‚Äúmakes it harder to see in code where an object is defined‚Äù. I second the latter.&lt;/p&gt;'><sup>6</sup></a>.</p></li>
<li><p>R source code is <em>not</em> split over several files as <a href="https://style.tidyverse.org/package-files.html" class="external-link">suggested by the TSG</a> but instead is (as far as possible) kept in the single file <a href="Rmd/pkgpurl.Rmd"><code>Rmd/pkgpurl.Rmd</code></a> which is well-structured thanks to its <a href="#r-markdown-format">Markdown support</a>.</p></li>
</ul>
<p>As far as possible, these deviations from the TSG plus some additional restrictions are formally specified in the <a href="https://github.com/jimhester/lintr#project-configuration" class="external-link">lintr configuration file</a> <a href=".lintr"><code>.lintr</code></a>, so lintr can be used right away to check for formatting issues:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pkgpurl</span><span class="fu">::</span><span class="fu"><a href="reference/lint_rmd.html">lint_rmd</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>


  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://gitlab.com/salim_b/r/pkgs/pkgpurl/" class="external-link">Browse source code</a></li>
<li><a href="https://gitlab.com/salim_b/r/pkgs/pkgpurl/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>AGPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing pkgpurl</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Salim Br√ºggemann <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5329-5987" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Salim Br√ºggemann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
